# code-review スキル

コード変更に対する包括的なセキュリティと品質レビューを提供するスキルです。

## 概要

このスキルは、コミット前の変更点を分析し、以下の問題を検出します：

- **セキュリティ脆弱性**（認証情報の漏洩、インジェクション攻撃など）
- **コード品質の問題**（長すぎる関数、深いネストなど）
- **ベストプラクティス違反**（テスト不足、アクセシビリティ問題など）

## 使い方

### スキルの呼び出し

Claude に以下のようなフレーズで依頼してください：

- 「コードレビューして」
- 「セキュリティチェックを実行して」
- 「変更内容を品質チェックして」
- 「コミット前にレビューして」

### 手動でのレビュー実行

```bash
# 変更ファイルの確認
git diff --name-only HEAD

# 簡易レビュースクリプトの実行
bash skills/code-review/scripts/review.sh
```

## チェック項目

### 重大度レベル

| レベル | 説明 | 対応 |
|--------|------|------|
| CRITICAL | セキュリティ脆弱性 | **必ず修正** |
| HIGH | 重大なコード品質問題 | **修正推奨** |
| MEDIUM | ベストプラクティス違反 | 可能なら修正 |
| LOW | 軽微な問題 | 任意 |

### セキュリティチェック（CRITICAL）

- ハードコードされた認証情報、APIキー、トークン
- SQLインジェクション脆弱性
- XSS脆弱性
- 入力バリデーションの欠如
- 安全でない依存関係
- パストラバーサルのリスク

### コード品質チェック（HIGH）

- 50行を超える関数
- 800行を超えるファイル
- 4レベルを超えるネスト深度
- エラーハンドリングの欠如
- `console.log` 文の残存
- TODO/FIXME コメント
- パブリックAPIのJSDoc欠如

### ベストプラクティスチェック（MEDIUM）

- ミューテーションパターン（イミュータブル推奨）
- コード/コメント内の絵文字使用
- 新規コードに対するテストの欠如
- アクセシビリティ（a11y）の問題

## ファイル構成

```
code-review/
├── SKILL.md        # スキル定義（Claude が読み込む）
├── README.md       # 使い方ガイド（このファイル）
└── scripts/
    └── review.sh   # 簡易レビュースクリプト
```

## 注意事項

- CRITICAL または HIGH の問題が検出された場合、コミットはブロックされます
- セキュリティ脆弱性のあるコードは絶対に承認されません
- レビュー結果は参考として使用し、最終判断は人間が行ってください
