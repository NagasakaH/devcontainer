---
name: plan
description: 実装計画の作成ガイド。コードを書く前に要件を明確化し、リスクを評価し、段階的な実装計画を作成する。新機能の開発、アーキテクチャの変更、複雑なリファクタリング、複数ファイルに影響する変更、要件が曖昧な場合に使用。「計画を立てて」「実装計画」「設計してから」などのフレーズで発動。
---

# 実装計画（Plan）

実装に着手する前に包括的な計画を作成するためのガイド。

## このスキルの目的

1. **要件の再確認** - 構築すべきものを明確化
2. **リスクの特定** - 潜在的な問題やブロッカーを洗い出す
3. **段階的な計画作成** - 実装をフェーズに分解
4. **確認を待つ** - ユーザーの承認を得てから実装に進む

## ワークフロー

### ステップ1: 要件の分析と再確認

リクエストを分析し、要件を明確な言葉で再確認する。

- 何を構築する必要があるか
- 期待される動作は何か
- 成功の基準は何か

### ステップ2: フェーズへの分解

実装を具体的で実行可能なステップに分解する。

各フェーズには以下を含める：
- 明確な目標
- 具体的なタスク
- 期待される成果物

### ステップ3: 依存関係の特定

コンポーネント間の依存関係を明らかにする。

- どのタスクが他のタスクに依存するか
- 並行して進められるタスクはどれか
- 外部依存関係（ライブラリ、サービス等）

### ステップ4: リスク評価

潜在的なブロッカーやリスクを評価する。

リスクレベル：
- **高**: 即座に対処が必要、プロジェクト全体に影響
- **中**: 注意が必要、部分的な影響
- **低**: 軽微な影響、容易に対処可能

### ステップ5: 複雑さの見積もり

全体の複雑さを評価する。

- 高/中/低 で評価
- 各フェーズの概算時間
- 合計時間の見積もり

### ステップ6: 計画の提示と確認待ち

**重要**: 計画を提示した後、ユーザーの明示的な確認を必ず待つ。

確認なしにコードを書き始めてはならない。

## 計画テンプレート

```markdown
# 実装計画: {機能名}

## 要件の再確認
- {要件1}
- {要件2}
- {要件3}

## 実装フェーズ

### フェーズ1: {フェーズ名}
- {タスク1}
- {タスク2}
- {タスク3}

### フェーズ2: {フェーズ名}
- {タスク1}
- {タスク2}

## 依存関係
- {依存関係1}
- {依存関係2}

## リスク
- 高: {リスク内容}
- 中: {リスク内容}
- 低: {リスク内容}

## 複雑さの見積もり: {高/中/低}
- フェーズ1: {時間}
- フェーズ2: {時間}
- 合計: {時間}

**確認待ち**: この計画で進めてよろしいですか？（はい/いいえ/修正）
```

## ユーザーからの修正依頼への対応

ユーザーが変更を希望する場合の対応：

- 「修正: {変更内容}」 → 指定された部分を修正
- 「別のアプローチで: {代替案}」 → 新しいアプローチで再計画
- 「フェーズ2を先にして」 → 順序を変更

## 重要な注意事項

**絶対に守ること**: ユーザーが「はい」「進めて」などの肯定的な回答をするまで、コードの実装を開始してはならない。

計画の承認後は、以下のアプローチを検討：
- TDDで実装（テスト駆動開発）
- ビルドエラーが発生した場合は修正を繰り返す
- 完了後にコードレビューを実施
